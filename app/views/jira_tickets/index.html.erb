<%= turbo_frame_tag "#{@commit_metadatum.id}_jira_tickets" do %>
  <%= link_to "Add Ticket", 
      new_commit_metadatum_jira_ticket_path(@commit_metadatum),
      class: "usa-button",
      data: { turbo_stream: true } %>
  <% if @tickets.any? %>
    <table class="usa-table width-full margin-top-1" id="<%= "#{@commit_metadatum.id}_jira_tickets" %>">
      <colgroup>
        <col style="width: 50%">
        <col style="width: 20%">
        <col style="width: 20%">
        <col style="width: 10%">
      </colgroup>
      <thead>
        <tr>
          <th scope="col">Ticket</th>
          <th scope="col">State</th>
          <th scope="col">Author</th>
          <th scope="col">Actions</th>
        </tr>
      </thead>
      <tbody>
        <% @tickets.each do |ticket| %>
          <%= render ticket, commit_metadatum: @commit_metadatum %>
        <% end %>
      </tbody>
    </table>
  <% else %>
    <p>No Jira tickets found</p>
  <% end %>
<% end %>

<%= turbo_frame_tag "#{@commit_metadatum.id}_jira_tickets" do %>
  <div id="<%= @commit_metadatum.id %>_jira_tickets_container">
    <% if @tickets.any? %>
      <table class="usa-table width-full margin-top-1" id="<%= @commit_metadatum.id %>_jira_tickets_table">
        <colgroup>
          <col style="width: 50%">
          <col style="width: 20%">
          <col style="width: 20%">
          <col style="width: 10%">
        </colgroup>
        <thead>
          <tr>
            <th scope="col">Ticket</th>
            <th scope="col">State</th>
            <th scope="col">Author</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          <% @tickets.each do |ticket| %>
            <%= render ticket, commit_metadatum: @commit_metadatum %>
          <% end %>
        </tbody>
      </table>
    <% end %>
  </div>
  <div id="<%= @commit_metadatum.id %>_add_ticket_button" class="margin-top-2">
    <%= link_to "Add Ticket", 
        new_commit_metadatum_jira_ticket_path(@commit_metadatum),
        class: "usa-button",
        data: { turbo_stream: true } %>
  </div>
<% end %>
